name: CI
on:
  push:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    container:
      image: fedora:37
    steps:
    - uses: actions/checkout@v3
    - name: Build
      run: |
        dnf -y install ansible
        ansible --version
        printf '[defaults]\nroles_path=../\n' > ansible.cfg
        ansible-playbook tests/test.yml -i tests/inventory --syntax-check
        ansible-playbook tests/test.yml -i tests/inventory --connection=local -e "{'linuxbrew_use_installer':true}"
